<Window x:Class="PiggyBankAdmin.Views.Dialogs.CreateTransactionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Добавление транзакции" 
        MinHeight="380" 
        MinWidth="250"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Заголовок -->
            <RowDefinition Height="Auto"/>
            <!-- Текст типа -->
            <RowDefinition Height="Auto"/>
            <!-- Радиокнопки -->
            <RowDefinition Height="Auto"/>
            <!-- Текст пользователь -->
            <RowDefinition Height="Auto"/>
            <!-- Комбобокс пользователя -->
            <RowDefinition Height="Auto"/>
            <!-- Текст сумма -->
            <RowDefinition Height="Auto"/>
            <!-- Поле суммы -->
            <RowDefinition Height="Auto"/>
            <!-- Текст описание -->
            <RowDefinition Height="80"/>
            <!-- Поле описания -->
            <RowDefinition Height="Auto"/>
            <!-- Текст дата -->
            <RowDefinition Height="Auto"/>
            <!-- DatePicker -->
            <RowDefinition Height="Auto"/>
            <!-- Чекбокс повторения -->
            <RowDefinition Height="Auto"/>
            <!-- Панель периода (изначально скрыта) -->
            <RowDefinition Height="*"/>
            <!-- Растягивающееся пространство -->
            <RowDefinition Height="Auto"/>
            <!-- Кнопки -->
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" 
                   Text="💳 Новая транзакция" 
                   FontSize="16" 
                   FontWeight="Bold" 
                   Margin="0,0,0,15"
                   HorizontalAlignment="Center"/>

        <!-- Тип транзакции -->
        <TextBlock Grid.Row="1" 
                   Text="Тип транзакции:" 
                   Margin="0,5"/>

        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    Margin="0,0,0,15">
            <RadioButton Name="IncomeRadioButton" 
                        Content="💰 Доход" 
                        GroupName="TransactionType"
                        IsChecked="True"
                        Margin="0,0,15,0"/>
            <RadioButton Name="ExpenseRadioButton" 
                        Content="💸 Расход" 
                        GroupName="TransactionType"/>
        </StackPanel>

        <!-- Пользователь -->
        <TextBlock Grid.Row="3" 
                   Text="Пользователь:" 
                   Margin="0,5"/>

        <ComboBox Grid.Row="4" 
                  Name="UserComboBox"
                  DisplayMemberPath="Name"
                  Margin="0,0,0,15"/>

        <!-- Сумма -->
        <TextBlock Grid.Row="5" 
                   Text="Сумма (₽):" 
                   Margin="0,5"/>

        <TextBox Grid.Row="6" 
                 Name="AmountTextBox" 
                 Margin="0,0,0,15"
                 FontSize="14"
                 Padding="5"
                 PreviewTextInput="AmountTextBox_PreviewTextInput"/>

        <!-- Описание -->
        <TextBlock Grid.Row="7" 
                   Text="Описание:" 
                   Margin="0,5"/>

        <TextBox Grid.Row="8" 
                 Name="DescriptionTextBox" 
                 Margin="0,0,0,15"
                 FontSize="14"
                 Padding="5"
                 TextWrapping="Wrap"
                 AcceptsReturn="True"
                 VerticalScrollBarVisibility="Auto"/>

        <!-- Дата -->
        <TextBlock Grid.Row="9" 
                   Text="Дата:" 
                   Margin="0,5"/>

        <DatePicker Grid.Row="10" 
                    Name="DatePicker"
                    Margin="0,0,0,15"/>

        <!-- Чекбокс повторяющейся транзакции -->
        <CheckBox Grid.Row="11" 
                  Name="IsRecurringCheckBox"
                  Content="🔄 Повторяющаяся транзакция"
                  Margin="0,0,0,10"
                  Checked="IsRecurringCheckBox_Changed"
                  Unchecked="IsRecurringCheckBox_Changed"/>

        <!-- Период повторения (скрыт по умолчанию) -->
        <StackPanel Grid.Row="12" 
                    Name="RecurringPanel"
                    Orientation="Horizontal"
                    Margin="0,0,0,20"
                    Visibility="Collapsed">

            <TextBlock Text="Период:" 
                       VerticalAlignment="Center"
                       Margin="0,0,10,0"/>

            <ComboBox Name="RecurringComboBox" 
                      Width="120">
                <ComboBoxItem Content="Ежедневно" IsSelected="True"/>
                <ComboBoxItem Content="Еженедельно"/>
                <ComboBoxItem Content="Ежемесячно"/>
            </ComboBox>
        </StackPanel>

        <!-- Пустое пространство для растягивания -->
        <Border Grid.Row="13" Background="Transparent"/>

        <!-- Кнопки в самом низу -->
        <StackPanel Grid.Row="14" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,20,0,0">

            <Button Content="💾 Сохранить" 
                    Click="SaveButton_Click"
                    Background="#88D398" 
                    Foreground="White" 
                    Padding="15,8"
                    Margin="0,0,10,0"
                    FontWeight="SemiBold"
                    MinWidth="80"/>

            <Button Content="❌ Отмена" 
                    Click="CancelButton_Click"
                    Background="#F3E8D2" 
                    Padding="15,8"
                    MinWidth="80"/>
        </StackPanel>
    </Grid>
</Window>